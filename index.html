<html>
  <head>
    <link type="text/css" rel="stylesheet" href="/stylesheets/main.css" />
    <title>Restaurant Week Finder</title>
  </head>
  <body>
    <div id="inputWrapper">
      <input class="rinput" id="rSearch" type="text"></input>
      <input class="rinput" id="address"></input>
    <div>
    <br />
    <table id="rViewer" class="tableSorter">
        <thead>
        <tr>
          <th>Name</th>
          <th>Book</th>
          <th>Directions</th>
          <th>Genre</th>
          <th>Neighborhood</th>
          <th>Distance</th>
          <th>Rating</th>
        </tr>
        <tbody id="rViewerBody">
          {% for restaurant in restaurants %}
        <tr>
          <td>{{restaurant.name|escape}}<br/>
            {% ifnotequal restaurant.ot_mf "" %}
              Mon-Fri: {{restaurant.ot_mf|escape}}<br/>
            {% endifnotequal %}
            {%ifnotequal restaurant.ot_sun "" %}
              Sun: {{restaurant.ot_sun|escape}}
            {% endifnotequal %}
          </td>
          <td><a href=http://{{restaurant.ot_link|escape}}>Book</a></td>
          <td><a href='#' id="{{restaurant.yelp_id|normalize|escape}}Directions">Directions</a></td>
          <td>{{restaurant.genre|escape}} </td>
          <td>{{restaurant.neighborhood|escape}}</td>
          <td id="{{restaurant.yelp_id|normalize|escape}}Distance">N/A</td>
          <td>{{restaurant.rating|escape}} </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    <br />

    <script src="js/jquery-1.5.min.js"></script>
    <script src="js/jquery.tablesorter.min.js"></script>
    <script src="js/jquery.quicksearch.js"></script>
    <script src="js/rlist.js"></script>
    <script src="js/rweekfinder.js"></script>
    <script>
      var rests = {}
      {% for r in restaurants %}
        var name = "{{r.name|normalize|escape}}";
        name = name.replace(/ /g, '').toLowerCase();
        rests[name] = {};
        rests[name].name = "{{r.name|normalize|escape}}";
        rests[name].ot_link = "{{r.ot_link|escape}}";
        rests[name].address = "{{r.address|escape}}";
        rests[name].lat = "{{r.lat|escape}}";
        rests[name].lng = "{{r.lng|escape}}";
        rests[name].yelp_id = "{{r.yelp_id|normalize|escape}}";
      {% endfor %}
      rweek.rests = rests;
      updateRestTable();
    </script>
  </body>
</html>
